{% extends "inventory/base.html" %} 
{% block title %}Products - Brown And Co 
{% endblock title %} {% block content %}

<!-- Page Header -->
<div class="page-header d-flex justify-content-between align-items-center">
  <div>
    <h1 class="page-title">Products</h1>
    <p class="page-subtitle">Manage your product inventory</p>
  </div>
  <a href="{% url 'product_add' %}" class="btn btn-primary">
    <i class="bi bi-plus-circle"></i> Add Product
  </a>
</div>

<!-- Search and Filter Card -->
<div class="modern-card mb-4">
  <form method="get" class="row g-3">
    <div class="col-md-6">
      <div class="input-group">
        <span class="input-group-text">
          <i class="bi bi-search"></i>
        </span>
        <input
          type="text"
          name="search_query"
          class="form-control"
          placeholder="Search by product name, SKU, or supplier..."
          value="{{ search|default:'' }}"
        />
      </div>
    </div>

    <div class="col-md-4">
      <select name="category_query" class="form-select">
        <option value="">All Categories</option>
        {% for cat in categories %}
        <option
          value="{{ cat }}"
          {%
          if
          cat=""
          ="category_query"
          %}selected{%
          endif
          %}
        >
          {{ cat }}
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-2">
      <button type="submit" class="btn btn-primary w-100">
        <i class="bi bi-funnel"></i> Filter
      </button>
    </div>
  </form>
</div>

<!-- Products Table -->
{% if products %}
<div class="modern-table">
  <table class="table table-hover mb-0">
    <thead>
      <tr>
        <th>Product Name</th>
        <th>SKU</th>
        <th>Category</th>
        <th>Stock</th>
        <th>Reorder Level</th>
        <th>Supplier</th>
        <th>Status</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
      <tr
        data-quantity="{{ product.current_quantity }}"
        data-reorder="{{ product.reorder_level }}"
      >
        <td>
          <strong>{{ product.name }}</strong>
        </td>
        <td><code>{{ product.sku }}</code></td>
        <td>
          <span class="badge bg-secondary">{{ product.category }}</span>
        </td>
        <td>
          <strong>{{ product.current_quantity }}</strong> {{ product.unit }}
        </td>
        <td>{{ product.reorder_level }} {{ product.unit }}</td>
        <td>{{ product.supplier_name|default:"â€”" }}</td>
        <td>
          {% if product.current_quantity == 0 %}
          <span class="stock-badge critical">Out of Stock</span>
          {% elif product.current_quantity <= product.reorder_level %}
          <span class="stock-badge low">Low Stock</span>
          {% else %}
          <span class="stock-badge good">In Stock</span>
          {% endif %}
        </td>
        <td>
          <div class="action-buttons justify-content-end">
            <a href="{% url 'product_update' product.id %}" class="btn-action">
              <i class="bi bi-pencil"></i> Edit
            </a>
            <a
              href="{% url 'product_delete' product.id %}"
              class="btn-action danger"
            >
              <i class="bi bi-trash"></i> Delete
            </a>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% else %}

<!-- Empty State -->
<div class="modern-card">
  <div class="empty-state">
    <div class="empty-state-icon">
      <i class="bi bi-box"></i>
    </div>
    <div class="empty-state-title">No Products Found</div>
    <div class="empty-state-description">
      {% if search or category_query %} No products match your search criteria.
      Try adjusting your filters. {% else %} Start building your inventory by
      adding your first product. {% endif %}
    </div>
    <a href="{% url 'product_add' %}" class="btn btn-primary mt-3">
      <i class="bi bi-plus-circle"></i> Add Your First Product
    </a>
  </div>
</div>

{% endif %} {% endblock content %}
