{% extends "inventory/base.html" %}

{% block title %}Transaction History - Brown And Co{% endblock title %}

{% block content %}

<!-- Page Header -->
<div class="page-header d-flex justify-content-between align-items-center">
  <div>
    <h1 class="page-title">Transaction History</h1>
    <p class="page-subtitle">View all stock movements and transactions</p>
  </div>
  <a href="{% url 'transaction_add' %}" class="btn btn-success">
    <i class="bi bi-plus-circle"></i> New Transaction
  </a>
</div>

<!-- Filter Card -->
<div class="modern-card mb-4">
  <form method="get" class="row g-3">
    <div class="col-md-6">
      <div class="input-group">
        <span class="input-group-text">
          <i class="bi bi-search"></i>
        </span>
        <input
          type="text"
          name="search"
          class="form-control"
          placeholder="Search by product name..."
          value="{{ search|default:'' }}"
        />
      </div>
    </div>

    <div class="col-md-4">
      <select name="type" class="form-select">
        <option value="">All Transaction Types</option>
        <option value="In" {% if type == 'In' %}selected{% endif %}>Stock In</option>
        <option value="Out" {% if type == 'Out' %}selected{% endif %}>Stock Out</option>
      </select>
    </div>

    <div class="col-md-2">
      <button type="submit" class="btn btn-primary w-100">
        <i class="bi bi-funnel"></i> Filter
      </button>
    </div>
  </form>
</div>

<!-- Transaction History Table -->
{% if transactions %}
<div class="modern-table">
  <table class="table">
    <thead>
      <tr>
        <th>Product</th>
        <th>Type</th>
        <th>Quantity</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% for tran in transactions %}
      <tr>
        <td>
          <strong>{{ tran.product.name }}</strong>
          <div class="text-muted small">{{ tran.product.sku }}</div>
        </td>
        <td>
          <span class="transaction-badge {% if tran.type == 'In' %}in{% else %}out{% endif %}">
            {% if tran.type == 'In' %}
            <i class="bi bi-arrow-down-circle"></i> In
            {% else %}
            <i class="bi bi-arrow-up-circle"></i> Out
            {% endif %}
          </span>
        </td>
        <td>{{ tran.quantity }} {{ tran.product.unit }}</td>
        <td>{{ tran.created_at|date:"M d, Y H:i" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% else %}

<!-- Empty State -->
<div class="modern-card">
  <div class="empty-state">
    <div class="empty-state-icon">
      <i class="bi bi-inbox"></i>
    </div>
    <div class="empty-state-title">No Transactions Found</div>
    <div class="empty-state-description">
      {% if search or type %}
      No transactions match your filter criteria. Try adjusting your filters.
      {% else %}
      Start recording your stock movements to see transaction history here.
      {% endif %}
    </div>
    <a href="{% url 'transaction_add' %}" class="btn btn-success mt-3">
      <i class="bi bi-plus-circle"></i> Record Your First Transaction
    </a>
  </div>
</div>

{% endif %}


{% endblock content %}




